ุชุณุช ุณุฑุนุช ุณุฑูุฑ ูููฺฉุณ ุจุง ฺฉ ุฏุณุชูุฑ!

ุจุง ุงุฌุฑุง ุฏุณุชูุฑ ุฒุฑุ ุณุฑุนุช ูพุฑุฏุงุฒุด ุณุฑูุฑุชุงู ุฑุง ุจู ุณุงุฏฺฏ ุงุฑุฒุงุจ ฺฉูุฏ.

```
wget -qO- bench.sh | bash
```
ุจุง ุงู ุชุณุชุ ูโุชูุงูุฏ ุนููฺฉุฑุฏ ู ุจูุฑูโูุฑ ุณุฑูุฑ ุฎูุฏ ุฑุง ุจุณูุฌุฏ

---

ุฏูุงู ุงุตู ฺฉูุฏ ูพุงุณุฎ API (ุจุงูุง ท ุซุงูู)
1) ูุดฺฉู ุฏุฑ ุฎูุฏ ุณุฑูุฑ (CPU / RAM / Load Average)

ุงฺฏุฑ ุณุฑูุฑ ุฏุฑฺฏุฑ ุจุงุดุฏ โ ูพุงุณุฎ ุฏุฑ ูโุฑุณุฏ.

โณ ุจุฑุฑุณ ุณุฑุน:
```
top
htop
uptime
```

ุงฺฏุฑ Load ุจุงูุงุณุช (ุจุดุชุฑ ุงุฒ ุชุนุฏุงุฏ ูุณุชู CPU)ุ ูุดฺฉู ููู ุงุณุช.

2) ฺฉูุฏ ุณุฑูุณ ู Boot ุจุฑุงุณุงุณ ุชุตูุฑุช

ุทุจู ุฏุชุง ฺฉู ูุฑุณุชุงุฏุ ุณุณุชู ุฒูุงู ุฒุงุฏ ูุนุทู ูโุดูุฏุ ูุซูุงู:
```
unbound-anchor.service = ตฐ ุซุงูู ูุนุทู

postfix / tuned / udisks2 = ุณุฑูุณโูุง ุงุถุงู
```
ุงฺฏุฑ ุณุณุชู ุฒุฑ ุจุงุฑ ุงุณุช ุง DNS ูุดฺฉู ุฏุงุฑุฏุ ุฑู API ูู ุงุซุฑ ูโฺฏุฐุงุฑุฏ.

3) ูุดฺฉู DNS โ Requestูุง API ุฑุง ุดุฏุฏุงู ฺฉูุฏ ูโฺฉูุฏ

ุฎู ููู:

ููุช API ุงุฒ ุณูุช Postman ูโุฒูุ ุงฺฏุฑ DNS ุณุณุชู ุฏุฑุณุช ฺฉุงุฑ ูฺฉูุฏ:

๐ ุณุฑูุฑ ูุจู ุงุฒ ุฌูุงุจ ุฏุงุฏู ุจุงุฏ DNS Resolve ฺฉูุฏ
๐ ุงฺฏุฑ ุงูุชุฑูุชุจุฏ ุจุงุดุฏ โ timeout 5โ10 ุซุงูู
๐ ูุชุฌู: ุชุฃุฎุฑ ุฏููุงู "ท ุซุงูู"

ู ุทุจู ูุงฺฏโูุง Boot:
```
unbound-anchor.service ุฑู ุณุณุชู ุดูุง ูุดฺฉู ุฏุงุฑุฏ โ ุงุญุชูุงูุงู DNS ุฏุฑฺฏุฑ ุงุณุช.
```
ุชุณุช DNS:
```
dig google.com
```

ุงฺฏุฑ ุฏุฑ ูพุงุณุฎ ูโุฏูุฏ โ ูุดฺฉู DNS ุฏุงุฑ.

ุชุณุช ุจุฏูู DNS:
```
curl http://127.0.0.1:PORT
```

ุงฺฏุฑ ุณุฑุน ุจูุฏ โ ฑฐฐูช ูุดฺฉู DNS ุงุณุช.

4) ฺฉูุฏ ุดุจฺฉู ุจู Postman โ ุณุฑูุฑ

ุงฺฏุฑ API ุณุฑูุฑ ุฏูุฑ ุงุฒ ฺฉูุงูุช ุงุณุช:

ูพูฺฏ ุจุงูุง
```
packet loss
```
ูุดฺฉู Routing
```
MTU mismatch
```
ุชุณุช ุณุฑุนุช ุดุจฺฉู:
```
ping SERVER_IP
mtr SERVER_IP
```

ุงฺฏุฑ ping ุจุงูุงุณุช โ ูุดฺฉู ุดุจฺฉู ุงุณุช.

5) ฺฉูุฏ ุฏุชุงุจุณ (SQL / NoSQL)

ุงฺฏุฑ API ุจู DB ูุตู ุงุณุชุ ุดุงุนโุชุฑู ุนูุช ฺฉูุฏ:
```
Query ุณูฺฏู

Index ูุฏุงุดุชู

Lock

Connection Pool ุฎุงู

Network delay ุจู ุณุฑูุฑ ู ุฏุชุงุจุณ
```
ุชุณุช ุฏุณุช:
```
time mysql -u root -p -e "SELECT 1;"
```

ุง ุจุฑุง PostgreSQL:

```
time psql -c "SELECT 1;"
```

ุงฺฏุฑ ฺฉูุฏ ุจูุฏ โ ูุดฺฉู DB ุงุณุช.

6) ุฎูุฏ ุจุฑูุงูู Backend ฺฉูุฏ ุงุณุช

ุนูุชโูุง ุฑุงุฌ:

ูุงฺฏ ุฒุงุฏ (write ุจู ุฏุณฺฉ โ ตโท ุซุงูู delay)

ุงุจุฒุงุฑูุง ูุซู bcrypt ุจุง cost ุจุงูุง
```
Timeout ุณุฑูุณ ุฎุงุฑุฌ
```
ุงุณุชูุงุฏู ุงุฒ sleep / delay

ฺฉุงููฺฏ ุบูุท Thread/Worker

๐ฌ ุจุฑุง ุงูฺฉู ุณุฑุน ูุดฺฉู ุฑุง ูพุฏุง ฺฉููุ ูุทูุงู ุงู ถ ุชุณุช ุฑุง ุงูุฌุงู ุจุฏู:
ุชุณุช 1) ุชุณุช API ุฏุงุฎู ุฎูุฏ ุณุฑูุฑ (ุจุฏูู ุดุจฺฉู)

ุฑู ุฎูุฏ ุณุฑูุฑ ุจุฒู:
```
time curl -I http://localhost:PORT/api
```

ูุชุฌูโูุง:

ุงฺฏุฑ ฺฉูุฏ ุงุณุช โ ูุดฺฉู ุฏุงุฎู ุจุฑูุงูู ุง ุฏุชุงุจุณ ุงุณุช

ุงฺฏุฑ ุณุฑุน ุงุณุช โ ูุดฺฉู DNS ุง ุดุจฺฉู ุงุณุช (นฐูช)

ุชุณุช 2) ุชุณุช ุจุง IP ุจู ุฌุง ุฏุงููู

ุฏุฑ Postman:
```
http://YOUR_SERVER_IP:PORT
```

ุงฺฏุฑ ุจุง IP ุณุฑุนโุชุฑ ุจูุฏ โ ฑฐฐูช ูุดฺฉู DNS

ุชุณุช 3) ุฎุงููุด ฺฉุฑุฏู unbound-anchor ู ุชุณุช ุฏูุจุงุฑู
```
sudo systemctl stop unbound-anchor.service
```

ู ูุฌุฏุฏ ุชุณุช ฺฉู.

ุงฺฏุฑ ุจูุจูุฏ ุฏุงุดุช โ DNS ูุดฺฉู ุฏุงุฑุฏ.

ุชุณุช 4) ูพูฺฏ ุณุฑูุฑ
```
ping SERVER_IP
```

ุงฺฏุฑ ุจุงูุง 50โ80ms โ ฺฉูุฏ ุดุจฺฉู

โก ุฑุงูฺฉุงุฑ ุณุฑุน ุจุฑุง Boost ุณุฑุนุช
1) ุฎุงููุด ฺฉุฑุฏู ุณุฑูุณโูุง ุณูฺฏู DNS
```
sudo systemctl disable --now unbound-anchor.service
sudo systemctl disable --now systemd-udev-settle.service
```
2) ุชูุธู DNS ุณุฑุน

ุฏุฑ /etc/resolv.conf ุงุถุงูู ฺฉู:
```
nameserver 8.8.8.8
nameserver 1.1.1.1
```
3) ุงฺฏุฑ ฺฉุงูุชูุฑ ุฏุงุฑ โ ูุดฺฉูุงุช docker0 ู DNS Docker ุฑุง ฺฺฉ ฺฉู
```
docker logs CONTAINER_NAME --tail 50
```
๐ ุงฺฏุฑ ูโุฎูุงู ฺฉุงูู ูุดฺฉู ุฑุง ูุดุฎุต ฺฉูู:

ูุทูุงู ูููโูุง ุฑุง ุจุฏู:

โ ุฎุฑูุฌ ุงู ุฏุณุชูุฑุงุช:
```
time curl -I http://localhost:PORT
dig google.com
ping SERVER_IP
top -n 1
systemd-analyze blame
journalctl -xe --no-pager | tail -n 50
```
